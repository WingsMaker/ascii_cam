var camera=function(){var t,e,r,i,n;function o(){(e=document.createElement("video")).setAttribute("width",t.width),e.setAttribute("height",t.height),e.setAttribute("playsinline","true"),e.setAttribute("webkit-playsinline","true"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getUserMedia?navigator.getUserMedia({video:!0,audio:!1},function(n){t.onSuccess(),void 0!==e.mozSrcObject?e.mozSrcObject=n:e.srcObject=n,(r=t.targetCanvas||document.createElement("canvas")).setAttribute("width",t.width),r.setAttribute("height",t.height),i=r.getContext("2d"),t.mirror&&(i.translate(r.width,0),i.scale(-1,1))},t.onError):t.onNotSupported()}function a(){n&&clearInterval(n),e.pause()}return{init:function(e){var r=function(){};(t=e||{}).fps=t.fps||30,t.width=t.width||640,t.height=t.height||480,t.mirror=t.mirror||!1,t.targetCanvas=t.targetCanvas||null,t.onSuccess=t.onSuccess||r,t.onError=t.onError||r,t.onNotSupported=t.onNotSupported||r,t.onFrame=t.onFrame||r,o()},start:function(){e.play(),n=setInterval(function(){try{i.drawImage(e,0,0,e.width,e.height),t.onFrame(r)}catch(t){}},Math.round(1e3/t.fps))},pause:a,stop:function(){a(),void 0!==e.mozSrcObject?e.mozSrcObject=null:e.srcObject=null}}}();