var ascii=function(){function t(t,a){return{red:t[a],green:t[a+1],blue:t[a+2],alpha:t[a+3]}}function a(t,a){return Math.max(a[0],Math.min(a[1],t))}return{fromCanvas:function(r,n){return(n=n||{}).contrast=void 0===n.contrast?128:n.contrast,n.callback=n.callback||doNothing,function(r,n){for(var e=" .,:;i1tfLCG08@".split(""),o=r.getContext("2d"),l=r.width,c=r.height,h="",i=259*(n.contrast+255)/(255*(259-n.contrast)),u=o.getImageData(0,0,l,c),f=0;f<c;f+=2){for(var g=0;g<l;g++){var d=4*(f*l+g),s=t(u.data,d),b={red:a(Math.floor((s.red-128)*i)+128,[0,255]),green:a(Math.floor((s.green-128)*i)+128,[0,255]),blue:a(Math.floor((s.blue-128)*i)+128,[0,255]),alpha:s.alpha},v=(.299*b.red+.587*b.green+.114*b.blue)/255;h+=e[e.length-1-Math.round(v*(e.length-1))]}h+="\n"}n.callback(h)}(r,n)}}}();